@startuml
'https://plantuml.com/sequence-diagram

actor User as U

participant ":UserInterface" as UserInterface
participant ":Parser" as Parser
participant ":DeleteTransactionCommand" as DeleteTransactionCommand
participant ":User" as User
participant ":Storage" as Storage
participant ":OutputManager" as OutputManager


title Delete Transaction Sequence Diagram


U -> UserInterface : Enters "delete 2" command
activate UserInterface

UserInterface -> Parser : parseCommand(...)
activate Parser

Parser -> User : check LoggedIn
activate User

User --> Parser
deactivate User

alt User logged in
    create DeleteTransactionCommand
    Parser -> DeleteTransactionCommand: new DeleteTransactionCommand(...)
    activate DeleteTransactionCommand

    DeleteTransactionCommand --> Parser
    deactivate DeleteTransactionCommand
    Parser -> DeleteTransactionCommand : execute(...)
    activate DeleteTransactionCommand

    DeleteTransactionCommand -> User : deleteTransaction(2)
    activate User

    User -> User : remove(index = 2) from TransactionList
    User --> User : confirm deletion

    User -> Storage : saveTransactions(...)
    Storage --> User

    User -> OutputManager : print delete success message and balance
    activate OutputManager

    OutputManager --> U
    deactivate OutputManager
    deactivate User
    DeleteTransactionCommand --> Parser
    deactivate DeleteTransactionCommand

else User not logged in

    Parser -> OutputManager : print error "Please log in first!"
    activate OutputManager
    OutputManager --> U
    deactivate OutputManager
end

Parser --> UserInterface : return shouldExit = "false"
deactivate Parser
deactivate UserInterface

@enduml
